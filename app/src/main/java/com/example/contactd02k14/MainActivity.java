package com.example.contactd02k14;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.view.View;
import android.widget.ListView;

import com.example.contactd02k14.model.Contact;
import com.example.contactd02k14.model.ContactAdapter;

import java.util.ArrayList;
import java.util.List;

public class MainActivity extends AppCompatActivity {

    private ListView lvContacts;
    private ContactAdapter contactAdapter;
    private List<Contact> dataSource;

    private CreateContactDialog createContactDialog = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        lvContacts = findViewById(R.id.lvContacts);
        // Fake du lieu => kiem tra xem listview da hoat dong hay chua?
        dataSource = new ArrayList<>();
        dataSource.add(new Contact("Bill Gates", "contact1@gmail.com","0828.182.282","https://qph.cf2.quoracdn.net/main-qimg-b01e72afd97a84995ad9af4e455494f2-lq"));
        dataSource.add(new Contact("Elon Musk", "contact2@gmail.com","0828.182.283","data:image/jpeg;base64,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"));
        dataSource.add(new Contact("Contact 3", "contact3@gmail.com","0828.182.285",null));
        dataSource.add(new Contact("Contact 4", "contact4@gmail.com","0828.182.287",null));

        // Set Adapter cho listview
        contactAdapter = new ContactAdapter(this, dataSource);
        lvContacts.setAdapter(contactAdapter);

    }

    public void showDialogCreateContact(View view) {
        // Hien thi dialog de lay du lieu

        // Tao dialog tai day va show len
        if(createContactDialog == null){
            createContactDialog = new CreateContactDialog(this) {
                @Override
                public void getContactData(Contact contact) {
                    // Them vao dataSource
                    dataSource.add(contact);
                    // Render lai listview
                    contactAdapter.notifyDataSetChanged();
                }
            };
        }
        createContactDialog.show();

    }
}